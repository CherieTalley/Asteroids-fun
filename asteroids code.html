<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Asteroid Game</title>
<style>
  body {
    margin: 0;
    overflow: hidden;
    background: black;
    font-family: Arial, sans-serif;
  }
  canvas {
    display: block;
    margin: 0 auto;
    background: black;
  }
</style>
</head>
<body>

<canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// Stars background
const stars = [];
for (let i = 0; i < 200; i++) {
    stars.push({ x: Math.random() * canvas.width, y: Math.random() * canvas.height, r: Math.random() * 2 });
}

// Key controls
const keys = {};
document.addEventListener('keydown', e => keys[e.key] = true);
document.addEventListener('keyup', e => keys[e.key] = false);

// Ship
const ship = { x: canvas.width/2, y: canvas.height/2, angle: 0, radius: 20, speed: 0, bullets: [] };

// Particles
const particles = [];

// Asteroids
let asteroids = [];
const asteroidCount = 6;

function randomColor() {
    const colors = ['#FF6347','#FFD700','#7CFC00','#1E90FF','#FF69B4'];
    return colors[Math.floor(Math.random() * colors.length)];
}

function createAsteroids() {
    asteroids = [];
    for (let i = 0; i < asteroidCount; i++) {
        asteroids.push({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height,
            radius: 25 + Math.random() * 25,
            dx: (Math.random() - 0.5) * 2.5,
            dy: (Math.random() - 0.5) * 2.5,
            color: randomColor()
        });
    }
}

// Shooting
function shoot() {
    ship.bullets.push({
        x: ship.x + Math.cos(ship.angle) * ship.radius,
        y: ship.y + Math.sin(ship.angle) * ship.radius,
        dx: Math.cos(ship.angle) * 8,
        dy: Math.sin(ship.angle) * 8
    });
    // Add spark particles
    for (let i=0;i<5;i++){
        particles.push({
            x: ship.x,
            y: ship.y,
            dx: Math.cos(ship.angle) * 2 + (Math.random()-0.5)*2,
            dy: Math.sin(ship.angle) * 2 + (Math.random()-0.5)*2,
            life: 20 + Math.random()*20,
            color: 'yellow'
        });
    }
}

// Draw functions
function drawShip() {
    ctx.save();
    ctx.translate(ship.x, ship.y);
    ctx.rotate(ship.angle);
    ctx.beginPath();
    ctx.moveTo(20, 0);
    ctx.lineTo(-15, 10);
    ctx.lineTo(-15, -10);
    ctx.closePath();
    ctx.strokeStyle = 'white';
    ctx.lineWidth = 2;
    ctx.stroke();
    ctx.restore();
}

function drawAsteroids() {
    asteroids.forEach(a => {
        ctx.beginPath();
        ctx.arc(a.x, a.y, a.radius, 0, Math.PI*2);
        ctx.strokeStyle = a.color;
        ctx.lineWidth = 3;
        ctx.stroke();
    });
}

function drawBullets() {
    ctx.fillStyle = 'red';
    ship.bullets.forEach(b => {
        ctx.beginPath();
        ctx.arc(b.x, b.y, 3, 0, Math.PI*2);
        ctx.fill();
    });
}

function drawParticles() {
    particles.forEach((p, i) => {
        ctx.fillStyle = p.color;
        ctx.beginPath();
        ctx.arc(p.x, p.y, 2, 0, Math.PI*2);
        ctx.fill();
        p.x += p.dx;
        p.y += p.dy;
        p.life--;
        if (p.life <= 0) particles.splice(i, 1);
    });
}

function drawStars() {
    ctx.fillStyle = 'white';
    stars.forEach(s => {
        ctx.beginPath();
        ctx.arc(s.x, s.y, s.r, 0, Math.PI*2);
        ctx.fill();
    });
}

// Update game state
function update() {
    // Ship controls
    if (keys['ArrowUp']) ship.speed += 0.1;
    if (keys['ArrowDown']) ship.speed -= 0.05;
    if (keys['ArrowLeft']) ship.angle -= 0.05;
    if (keys['ArrowRight']) ship.angle += 0.05;

    ship.x += Math.cos(ship.angle) * ship.speed;
    ship.y += Math.sin(ship.angle) * ship.speed;
    ship.speed *= 0.98;

    // Screen wrap
    if (ship.x > canvas.width) ship.x = 0;
    if (ship.x < 0) ship.x = canvas.width;
    if (ship.y > canvas.height) ship.y = 0;
    if (ship.y < 0) ship.y = canvas.height;

    // Bullets update
    ship.bullets.forEach((b, i) => {
        b.x += b.dx;
        b.y += b.dy;
        if (b.x < 0 || b.x > canvas.width || b.y < 0 || b.y > canvas.height) {
            ship.bullets.splice(i,1);
        }
    });

    // Asteroids update
    asteroids.forEach(a => {
        a.x += a.dx;
        a.y += a.dy;
        if (a.x > canvas.width) a.x = 0;
        if (a.x < 0) a.x = canvas.width;
        if (a.y > canvas.height) a.y = 0;
        if (a.y < 0) a.y = canvas.height;
    });

    // Collisions bullets-asteroids
    ship.bullets.forEach((b, bi) => {
        asteroids.forEach((a, ai) => {
            const dist = Math.hypot(b.x - a.x, b.y - a.y);
            if (dist < a.radius) {
                // Explosion particles
                for (let i=0;i<15;i++){
                    particles.push({
                        x: a.x,
                        y: a.y,
                        dx: (Math.random()-0.5)*5,
                        dy: (Math.random()-0.5)*5,
                        life: 30 + Math.random()*20,
                        color: a.color
                    });
                }
                asteroids.splice(ai, 1);
                ship.bullets.splice(bi, 1);
            }
        });
    });

    if (asteroids.length === 0) createAsteroids();
}

// Main loop
function loop() {
    ctx.fillStyle = 'black';
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    drawStars();
    update();
    drawShip();
    drawAsteroids();
    drawBullets();
    drawParticles();
    requestAnimationFrame(loop);
}

// Fire bullets on space
document.addEventListener('keydown', e => { if(e.code === 'Space') shoot(); });

// Start game
createAsteroids();
loop();
</script>
</body>
</html>
